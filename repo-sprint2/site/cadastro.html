<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="assets/css/cadastro.css">
    <style>
        #div_mensagem {
            text-align: center;
            margin-bottom: 10px;
            color: red;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="image-section"></div>
        <a href="cadastro.html">
            <img class="img_btn_voltar" src="assets/img/btn_voltar.png" alt="btn voltar">
        </a>
        <div class="form-container">
            <h2>CADASTRE-SE AQUI</h2>
            
            <div class="form-group">
                <i class="fas fa-id-card"></i>
                <input class="main-input" id="input_cnpj" placeholder="CNPJ" type="text" oninput="validarCNPJ()" />
            </div>
            <div class="form-group">
                <i class="fas fa-building"></i>
                <input class="main-input" id="input_razao_social" placeholder="Razão social" type="text" oninput="validarRazaoSocial()" />
            </div>
            <div class="form-group">
                <i class="fas fa-industry"></i>
                <input class="main-input" id="input_nome_fantasia" placeholder="Nome fantasia" type="text" oninput="validarNomeFantasia()" />
            </div>
            <div class="form-group">
                <i class="fas fa-user-tie"></i>
                <input class="main-input" id="input_responsavel" placeholder="Responsável" type="text" oninput="validarResponsavel()" />
            </div>
            <div class="form-group">
                <i class="fas fa-envelope"></i>
                <input class="main-input" id="input_email" placeholder="E-mail" type="text" oninput="validarEmail()" />
            </div>
            <div class="form-group">
                <i class="fas fa-lock"></i>
                <input class="main-input" id="input_senha" placeholder="Senha" type="password" oninput="validarSenha()" />
            </div>
            <br>
            <span style="margin-left: 75px;"><b>Endereço:</b></span> <br>
            <div class="form-group">
                <input class="endereco-input" id="input_cep" placeholder="CEP" type="text" style="width: 100px; margin-right: 10px; margin-bottom: 10px;" oninput="validarCEP()" />
                <input class="endereco-input" id="input_bairro" placeholder="Bairro" type="text" style="width: 485px; margin-left: 0px;" oninput="validarBairro()" />
                <input class="endereco-input" id="input_logradouro" placeholder="Logradouro" type="text" style="margin-bottom: 10px; width: 620px;" oninput="validarRua()" />
                <input class="endereco-input" id="input_cidade" placeholder="Cidade" type="text" style="width:485px; margin-right: 10px;" oninput="validarCidade()" />
                <input class="endereco-input" id="input_estado" placeholder="Estado" type="text" style="width: 100px; margin-left: 0px;" oninput="validarEstado()" /> 
            </div><br>
            <div id="div_mensagem"></div>
            <div class="form-group">
                <button id="btn_cadastrar" onclick="cadastrar()" type="button">CADASTRE-SE</button>
            </div>
            <br>
            <div class="terms">
                Ao clicar em Cadastre-se, você concorda com nossos
                <a href="#">Termos</a>, 
                <a href="#">Política de Privacidade</a> e 
                <a href="#">Política de Cookies</a>. 
            </div>
            <div class="logo">
                <img alt="" src="../site/assets/img/logo_ondo_cadastro.png"/>
            </div>
        </div>
    </div>
</body>
</html>
<script>
    var correto = true;

    function validarCNPJ() {
        var cnpj = input_cnpj.value;
        var tamanho_cnpj = cnpj.length;
        var possui_traco = cnpj.includes("-");
        var possui_barra = cnpj.includes("/");
        var possui_ponto = cnpj.includes(".");

        var mensagem = "";

        if (tamanho_cnpj < 14) {
            input_cnpj.style.borderColor = "red";
            mensagem += "O CNPJ deve possuir exatamente 14 números <br>";
            correto = false;
        } else if (tamanho_cnpj == 14) {
            input_cnpj.style.borderColor = "green";
            mensagem += "<span style='color: green;'>CNPJ válido <br></span>";
        } else if(possui_ponto || possui_barra || possui_ponto){
            input_cnpj.style.borderColor = "red";
            mensagem += "Por favor, insira o seu CNPJ sem pontos, traços ou barras <br>";
            correto = false;
        }
        div_mensagem.innerHTML = mensagem;
    }

    function validarRazaoSocial() {
        var razao_social = input_razao_social.value;

        var tamanho_razao = razao_social.length; 

        var mensagem = "";

        if (tamanho_razao < 3) {
            input_razao_social.style.borderColor = "red";
            mensagem += "Razão social muito curta <br>";
            correto = false;
        } else {
            input_razao_social.style.borderColor = "green";
            mensagem += "<span style='color: green;'>Razão social válida</span>";
        }

        div_mensagem.innerHTML = mensagem;
    }

    function validarNomeFantasia() {
        var nome_fantasia = input_nome_fantasia.value;

        var tamanho_fantasia = nome_fantasia.length;
        var mensagem = "";

        if (tamanho_fantasia < 3) {
            input_nome_fantasia.style.borderColor = "red";
            mensagem += "Nome fantasia muito curto <br>";
            correto = false;
        } else {
            input_nome_fantasia.style.borderColor = "green";
            mensagem += "<span style='color: green;'>Nome fantasia válido</span>";
        }
        div_mensagem.innerHTML = mensagem;
    }

    function validarResponsavel() {
        var responsavel = input_responsavel.value;

        var tamanho_responsavel = responsavel.length;
        var mensagem = "";

        if (tamanho_responsavel < 10) {
            input_responsavel.style.borderColor = "red";
            mensagem += "Nome do responsável muito curto <br>";
            correto = false;
        } else {
            input_responsavel.style.borderColor = "green";
            mensagem += "<span style='color: green;'>Nome do responsável válido</span>";
        }
        div_mensagem.innerHTML = mensagem;
    }

    function validarEmail() {
        var email = input_email.value;
        var mensagem = "";
        var possui_arroba = email.includes("@");
        var termina_com = email.endsWith('.com');
        var termina_br = email.endsWith('.br');
        var termina_school = email.endsWith('.school');
        
        if (email.length > 3 && possui_arroba && (termina_com || termina_br || termina_school)) {
            input_email.style.borderColor = "green";
            mensagem += "<span style='color: green;'>E-mail válido</span>";
        } else {
            input_email.style.borderColor = "red";
            mensagem += "E-mail inválido, verifique o formato <br>";
            correto = false;
        }
        div_mensagem.innerHTML = mensagem;
    }

    function validarSenha() {
        var senha = input_senha.value;
        var mensagem = "";

        if (senha.length < 6) {
            input_senha.style.borderColor = "red";
            mensagem += "A senha deve ter pelo menos 6 caracteres <br>";
            correto = false;
        } else {
            input_senha.style.borderColor = "green";
            mensagem += "<span style='color: green;'>Senha válida</span>";
        }
        div_mensagem.innerHTML = mensagem;
    }

    function validarCEP() {
        var cep = input_cep.value;
        var tamanho_cep = cep.length;
        var mensagem = "";

        if (tamanho_cep < 8) {
            input_cep.style.borderColor = "red";
            mensagem += "CEP deve ter exatamente 8 dígitos <br>";
            correto = false;
        } else {
            input_cep.style.borderColor = "green";
            mensagem += "<span style='color: green;'>CEP válido</span>";
        }
        div_mensagem.innerHTML = mensagem;
    }

    function validarEstado() {
        var estado = input_estado.value;
        var mensagem = "";

        if (estado.length != 2) {
            input_estado.style.borderColor = "red";
            mensagem += "Estado deve ter somente 2 caracteres (sigla) <br>";
            correto = false;
        } else {
            input_estado.style.borderColor = "green";
            mensagem += "<span style='color: green;'>Estado válido</span>";
        }
        div_mensagem.innerHTML = mensagem;
    }
    function validarBairro(){
        var mensagem = "";

        var bairro = input_bairro.value
        if (bairro.length <= 0) {
            input_bairro.style.borderColor = "red";
            mensagem += "Insira um bairro <br>";
            correto = false;
        } else {
            input_bairro.style.borderColor = "green";
            mensagem += "<span style='color: green;'>Bairro válido</span>";
        }
        div_mensagem.innerHTML = mensagem;
        }
        function validarRua(){
        var mensagem = "";

        var rua = input_logradouro.value
        if (rua.length <= 0) {
            input_logradouro.style.borderColor = "red";
            mensagem += "Insira uma rua <br>";
            correto = false;
        } else {
            input_logradouro.style.borderColor = "green";
            mensagem += "<span style='color: green;'>Rua válida</span>";
        }
        div_mensagem.innerHTML = mensagem;
        }
        function validarCidade(){
        var mensagem = "";

        var cidade = input_cidade.value
        if (cidade.length <= 0) {
            input_cidade.style.borderColor = "red";
            mensagem += "Insira uma cidade <br>";
            correto = false;
        } else {
            input_cidade.style.borderColor = "green";
            mensagem += "<span style='color: green;'>Cidade válida</span>";
        }
        div_mensagem.innerHTML = mensagem;
        div_mensagem.innerHTML  = "";


        }
    

    function cadastrar() {
        correto = true;

        validarCNPJ();
        validarRazaoSocial();
        validarNomeFantasia();
        validarResponsavel();
        validarEmail();
        validarSenha();
        validarCEP();
        validarEstado();
        validarBairro();
        validarRua();
        validarCidade();

        if (correto) {
           alert("Usuário cadastrado com sucesso!");

        } else {
            alert("Corrija os campos destacados");
        }
    }
</script>