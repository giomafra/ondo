<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="assets/css/cadastro.css">
    <style>
        #div_mensagem {
            text-align: center;
            margin-bottom: 10px;
            color: red;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="image-section">
            <img src="assets/img/image_cadastro.jpg" alt="">
        </div>
        <a href="index.html">
            <img class="img_btn_voltar" src="assets/img/btn_voltar cadastro.png" alt="btn voltar">
        </a>
        <div class="form-container">
            <h2>CADASTRE-SE AQUI</h2>
            <div class="form_cointainer_empresa">

                <div class="form-group">
                    <i class="fas fa-id-card"></i>
                    <input class="main-input" id="input_cnpj" placeholder="CNPJ" type="text" oninput="validarCNPJ()" />
                </div>
                <div class="form-group">
                    <i class="fas fa-building"></i>
                    <input class="main-input" id="input_razao_social" placeholder="Razão social" type="text" oninput="validarRazaoSocial()" />
                </div>
                <div class="form-group">
                    <i class="fas fa-industry"></i>
                    <input class="main-input" id="input_nome_fantasia" placeholder="Nome fantasia" type="text" oninput="validarNomeFantasia()" />
                </div>
                <div class="form-group">
                    <i class="fas fa-user-tie"></i>
                    <input class="main-input" id="input_responsavel" placeholder="Responsável" type="text" oninput="validarResponsavel()" />
                </div>
                <div class="form-group">
                    <i class="fas fa-envelope"></i>
                    <input class="main-input" id="input_email" placeholder="E-mail" type="text" oninput="validarEmail()" />
                </div>
                <div class="form-group">
                    <i class="fas fa-lock"></i>
                    <input class="main-input" id="input_senha" placeholder="Senha" type="password" oninput="validarSenha()" />
                </div>

            </div>

            <br>
            <span style="margin-left: 130px;"><b>Endereço:</b></span> <br>
            <div class="form_container_endereco">
                <div class="form-group">
                    <input class="endereco-input" id="input_cep" placeholder="CEP" type="text"  oninput="validarCEP()" />
                    <input class="endereco-input" id="input_bairro" placeholder="Bairro"  type="text" oninput="validarBairro()" />
                    <input class="endereco-input" id="input_logradouro" placeholder="Logradouro" type="text"  oninput="validarRua()" />
                    <input class="endereco-input" id="input_cidade" placeholder="Cidade" type="text" oninput="validarCidade()" />
                    <input class="endereco-input" id="input_estado" placeholder="UF" type="text"  oninput="validarEstado()" /> 
                </div><br>
            </div>
            <div id="div_mensagem"></div>
            <div class="form-group">
                <button id="btn_cadastrar" onclick="cadastrar()" type="button">CADASTRE-SE</button>
            </div>
            <br>
            <span><a class="texLogin" href="login.html">Já tem uma conta? <br></a></span>

            <div class="terms">
                Ao clicar em Cadastre-se, você concorda com nossos
                <a href="#">Termos</a>, 
                <a href="#">Política de Privacidade</a> e 
                <a href="#">Política de Cookies</a>. 
            </div>
            <div class="logo">
                <img alt="" src="../site/assets/img/logo_ondo_cadastro.png"/>
            </div>
        </div>
    </div>
</body>
</html>
<script>
  var isEmail = false;
  var isSenha = false;
  var mensagem_error_email = "";
  function validarCNPJ() {
    var cnpj = input_cnpj.value;
    var tamanho_cnpj = cnpj.length;
    var possui_traco = cnpj.includes("-");
    var possui_barra = cnpj.includes("/");
    var possui_ponto = cnpj.includes(".");
    var mensagem = "";

    if (tamanho_cnpj < 14) {
        input_cnpj.style.borderColor = "red";
        mensagem += "O CNPJ deve possuir exatamente 14 números. <b>Você digitou " + tamanho_cnpj + " números.</b> <br>";
        correto = false;
    } else if (tamanho_cnpj == 14) {
        input_cnpj.style.borderColor = "green";
        mensagem += "<span style='color: green;'>CNPJ válido</span><br>";
    } else if (possui_traco || possui_barra || possui_ponto) {
        input_cnpj.style.borderColor = "red";
        mensagem += "Por favor, insira o CNPJ sem pontos, traços ou barras. Caracteres inválidos encontrados. <br>";
        correto = false;
    }
    div_mensagem.innerHTML = mensagem;
}

function validarRazaoSocial() {
    var razao_social = input_razao_social.value;
    var tamanho_razao = razao_social.length;
    var mensagem = "";

    if (tamanho_razao < 3) {
        input_razao_social.style.borderColor = "red";
        mensagem += "A razão social deve ter pelo menos 3 caracteres. <b>Atualmente, possui " + tamanho_razao + " caracteres. </b><br>";
        correto = false;
    } else {
        input_razao_social.style.borderColor = "green";
        mensagem += "<span style='color: green;'>Razão social válida</span>";
    }
    div_mensagem.innerHTML = mensagem;
}

function validarNomeFantasia() {
    var nome_fantasia = input_nome_fantasia.value;
    var tamanho_fantasia = nome_fantasia.length;
    var mensagem = "";

    if (tamanho_fantasia < 3) {
        input_nome_fantasia.style.borderColor = "red";
        mensagem += "O nome fantasia deve ter pelo menos 3 caracteres. <b>Você digitou apenas " + tamanho_fantasia + " caracteres. </b><br>";
        correto = false;
    } else {
        input_nome_fantasia.style.borderColor = "green";
        mensagem += "<span style='color: green;'>Nome fantasia válido</span>";
    }
    div_mensagem.innerHTML = mensagem;
}

function validarResponsavel() {
    var responsavel = input_responsavel.value;
    var tamanho_responsavel = responsavel.length;
    var possui_1 = input_responsavel.value.includes("1")
    var possui_2 = input_responsavel.value.includes("2")
    var possui_3 = input_responsavel.value.includes("3")
    var possui_4 = input_responsavel.value.includes("4")
    var possui_5 = input_responsavel.value.includes("5")
    var possui_6 = input_responsavel.value.includes("6")
    var possui_7 = input_responsavel.value.includes("7")
    var possui_8 = input_responsavel.value.includes("8")
    var possui_9 = input_responsavel.value.includes("9")
    var possui_0 = input_responsavel.value.includes("0")
    var mensagem = "";

    if (tamanho_responsavel < 10) {
        input_responsavel.style.borderColor = "red";
        mensagem += "O nome do responsável deve ter pelo menos 10 caracteres. <b>Você digitou " + tamanho_responsavel + " caracteres. </b><br>";
        correto = false;
    } else if (possui_1 || possui_2 || possui_3 || possui_4 || possui_5 || possui_6 || possui_7 || possui_8 || possui_9 || possui_0 ) {
        input_responsavel.style.borderColor = "red";
        mensagem += "O nome do responsável não pode conter números.  <b>Por favor, remova os dígitos numéricos.</b> <br>";
        correto = false;
    } else {
        input_responsavel.style.borderColor = "green";
        mensagem += "<span style='color: green;'>Nome do responsável válido</span>";
    }
    div_mensagem.innerHTML = mensagem;
}

    function validarEmail() {
    var email = input_email.value;
    email = email.toLowerCase();
    var mensagem = "";

    var comeca_ponto = email.startsWith('.');
    var ponto_ponto = email.includes('..');
    var arroba_ponto = email.includes('@.');
    var termina_com = email.endsWith('.com');
    var termina_br = email.endsWith('.br');
    var termina_school = email.endsWith('.school')
    var possui_arroba = email.includes('@');
    var possui_barra = email.includes('\\');
    var possui_barra_direita = email.includes('/');
    var possui_aspas = email.includes('"');

    if(ponto_ponto){
        input_email.style.borderColor = "red";
        correto = false;
      mensagem_error_email += "<b>Não pode ter .. no email</b><br>"
    }
    if(arroba_ponto){
        input_email.style.borderColor = "red";

        correto = false;
      mensagem += " <b>Não pode ter @. no email</b><br>"
    }
    if (possui_barra) {
        input_email.style.borderColor = "red";

        correto = false;
        mensagem += "<b>Não pode ter \\ no email</b><br>"
    }
    if (possui_barra_direita) {
        input_email.style.borderColor = "red";

        correto = false;
        mensagem += "<b>Não pode ter / no email</b><br>"
    }
    if (possui_aspas) {
        input_email.style.borderColor = "red";
        correto = false;
        mensagem += `<b>Não pode ter " no email</b><br>`
    }
    
    if (comeca_ponto) {
        input_email.style.borderColor = "red";
        correto = false;
        mensagem += " <b>Não pode ter . no início no email</b><br>"
    }
    
    if (!termina_br && !termina_com && !termina_school) {
        input_email.style.borderColor = "red";
        correto = false;
        mensagem += "<b>O e-mail deve terminar com .com, .br ou .school.</b><br>"
    }
    if (!possui_arroba) {
        input_email.style.borderColor = "red";
        correto = false;
        mensagem += " <b>Inclua '@' no e-mail. </b><br> ";
    } else {
        input_email.style.borderColor = "red";
        mensagem += " <b>Certifique-se de que o e-mail contém '@' e termina com '.com', '.br' ou '.school'. </b><br> ";
        correto = false;
    }
    div_mensagem.innerHTML = mensagem;
}

function validarSenha() {
    var senha = input_senha.value;
    var mensagem = "";

    if (senha.length < 6) {
        input_senha.style.borderColor = "red";
        mensagem += "A senha precisa de ao menos 6 caracteres. <b>Atualmente, possui " + senha.length + " caracteres. </b><br>";
        correto = false;
    } else {
        input_senha.style.borderColor = "green";
        mensagem += "<span style='color: green;'>Senha válida</span>";
    }
    div_mensagem.innerHTML = mensagem;
}

function validarCEP() {
    var cep = input_cep.value;
    var tamanho_cep = cep.length;
    var mensagem = "";

    if (tamanho_cep < 8) {
        input_cep.style.borderColor = "red";
        mensagem += "O CEP deve ter exatamente 8 dígitos. <b> Você digitou " + tamanho_cep + " dígitos. </b><br>";
        correto = false;
    } else {
        input_cep.style.borderColor = "green";
        mensagem += "<span style='color: green;'>CEP válido</span>";
    }
    div_mensagem.innerHTML = mensagem;
}

function validarEstado() {
    var estado = input_estado.value;
    var mensagem = "";

    if (estado.length != 2) {
        input_estado.style.borderColor = "red";
        mensagem += "A sigla do estado deve ter exatamente 2 caracteres.  <b>Você digitou " + estado.length + " caracteres.</b> <br>";
        correto = false;
    } else {
        input_estado.style.borderColor = "green";
        mensagem += "<span style='color: green;'>Estado válido</span>";
    }
    div_mensagem.innerHTML = mensagem;
}

function validarBairro() {
    var mensagem = "";
    var bairro = input_bairro.value;

    if (bairro.length <= 0) {
        input_bairro.style.borderColor = "red";
        mensagem += "Por favor, insira o nome do bairro. <br>";
        correto = false;
    } else {
        input_bairro.style.borderColor = "green";
        mensagem += "<span style='color: green;'>Bairro válido</span>";
    }
    div_mensagem.innerHTML = mensagem;
}

function validarRua() {
    var mensagem = "";
    var rua = input_logradouro.value;

    if (rua.length <= 0) {
        input_logradouro.style.borderColor = "red";
        mensagem += "Por favor, insira o nome da rua. <br>";
        correto = false;
    } else {
        input_logradouro.style.borderColor = "green";
        mensagem += "<span style='color: green;'>Rua válida</span>";
    }
    div_mensagem.innerHTML = mensagem;
}

function validarCidade() {
    var mensagem = "";
    var cidade = input_cidade.value;

    if (cidade.length <= 0) {
        input_cidade.style.borderColor = "red";
        mensagem += "Por favor, insira o nome da cidade. <br>";
        correto = false;
    } else {
        input_cidade.style.borderColor = "green";
        mensagem += "<span style='color: green;'>Cidade válida</span>";
    }
    div_mensagem.innerHTML = mensagem;
}

        div_mensagem.innerHTML  = "";

    

    function cadastrar() {
        correto = true;

        validarCNPJ();
        validarRazaoSocial();
        validarNomeFantasia();
        validarResponsavel();
        validarEmail();
        validarSenha();
        validarCEP();
        validarEstado();
        validarBairro();
        validarRua();
        validarCidade();

        if (correto) {
           alert("Usuário cadastrado com sucesso!");

        } else {
            alert("Corrija os campos destacados");
        }
    }
</script>